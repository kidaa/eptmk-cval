.TH MedPost 1 "November 1, 2006"
.LO 1
.SH NAME
medpost \- part of speech tagger for MEDLINE text
.SH SYNOPSIS
. .HP 10
.B medpost 
.RB [ \-xml | \-medline | \-text | \-idtext | \-token | \-idtoken ]
.RB [ \-penn ]
.RB [ \-claws2 ]
.RB [ \-id ]
.RB [ \-nosegment ]
.RB [ \-titles ]
.RB [ \-command ]
.RB [ \-version ]
.RI [ file ]

.SH DESCRIPTION
.B Medpost
is a part of speech tagger for MEDLINE.
Text is read from
.I file
(or standard input
if no file is specified), tokenized,
segmented into sentences,
tagged with parts of speech,
and printed to standard output.
The format of the input file
defaults to ITAME, with XML and MEDLINE
as options.
The output tag set is the
MedPost tag set, with Penn treebank and
SPECIALIST lexicon post-tagger translation options.

.SH OPTIONS
.TP 20
.B \-xml
The input text is formatted in the XML format
generated by MEDLINE.
.TP 20
.B \-medline
The input text is formatted in the MEDLINE format.
.TP 20
.B \-text
The input text consists of lines
of text to be tagged.
.TP 20
.B \-idtext
Same as -text but with an identifier
on each line preceding text to be tagged.
The identifiers are output as with the -id option.
.TP 20
.B \-token
The input text consists of pre-tokenized text,
with tokens separated by white space.
Any tags are removed, if they are appended to a
token by an underscore.
.TP 20
.B \-idtoken
Same as -idtoken but with an identifier
on each line preceding pre-tokenized text to be tagged.
The identifiers are output as with the -id option.
.TP 20
.B \-penn
The tagged output will be translated
to the Penn treebank tag set.
.TP 20
.B \-claws2
The tagged output will be translated
to the CLAWS2 tag set.
.TP 20
.B \-id
Each line of output is preceeded by an identifier.
Identifiers are constructed from the PMID of the text (or any
alpha\-numeric identifier given in the \.I field) with an additional
sentence identifier. The sentence identifier is an A or T, depending
on whether the sentence comes from the abstract or title, followed
by the sentence number.
.TP 20
.B \-titles
Both titles and abstracts will be tagged.
By default, only abstracts are tagged.
.TP 20
.B \-nosegment
Text is tagged without being broken into sentences.
.TP 20
.B \-command
Echo the command line (pipeline)
that would be used to invoke the tagger.
The commands are not executed.
.TP 20
.B \-version
Print the version date and installation date.
No commands are executed.

.SH TRANSLATION

Tagged output can be translated to the Penn treebank tag set
or CLAWS2 tag set,
when it is tagged by using the options
.B \-penn
or
.B \-claws2.
Alternatively, text that has been tagged with MedPost tags
and saved to a file can be translated
with the perl script.

.PP
.B perl util/medpost2tag.perl
.RB [ \-penn | \-claws2 ]
.RB [ \-preserve ]
[
.I file ...
]

This script can be executed from any directory,
just provide the path name to the perl scripts.
If
.I file
is not explicitly given on the command line,
then the standard input is read.
If the
.B \-preserve
option is specified,
then any non-tagged text encountered will
be printed to the standard output
without change.


.SH OPERATION

The shell script
.B medpost
in the MedPost installation directory
provides the recommended usage of the tagger.
The script will
read text from a file or from standard input for tagging, and
tagged output is written to standard output.

There are currently three input options for text: ITAME, XML, and
MEDLINE.  The XML and MEDLINE formats are the formats
produced by MEDLINE when saving search results
with one of these display options.
(see http://ncbi.nlm.nih.gov).
The default format is the ITAME format,
and this convenient format may be used
when tagging text from non-MEDLINE sources.

.SH ITAME FORMAT

The ITAME file format places all text of interest on lines beginning
with a period, followed by a field indicator, followed by the text
of the field.
The text in each field should appear
on a single line with no line breaks.
The field indicators are


.PD 0
.RS 4
.TP
I
identifier
.TP
T
title
.TP
A
abstract
.TP
E
end of record
.RS -4
.PD


The M field indicator, from which the ITAME acronym is derived, stands
for MeSH, but this field is ignored by the tagger.
Furthermore, any line that does not start in this way is ignored.

As an example, the record for the
PUBMED abstract with PMID 2359731 would look like

.PD 0
.RS 4
.TP
> .I2359731
.TP
> .TGiant centrifugal miliaria profunda.
.TP
> .AA 4-month-old developed rapidly enlarging ...
.TP
> .E
.RS -4
.PD

The input file, regardless of its format, may contain
arbitrarily many records.
The identifiers are used only
to construct sentence identifiers
(for the
.B -id
option)
, and whether derived from MEDLINE
or not, they need not be unique.

.SH INSTALLATION

The script file
.B medpost
may be invoked from
any directory, or copied to any directory
and executed.
However, after moving or renaming the install directory,
it must be re-installed by typing
.B make
or, equivalently, by executing the perl script
.B util/install.perl.

If the installation script fails, the installation
can be completed by hand.
.TP
1.
Edit the
.B medpost
file, which is a shell script, and set the
.B TAGGER_HOME
variable to the path name
of the MedPost installation.
For reference, the install script
also updates the
.B IDATE
variable to contain the date and time of the installation.
.TP
2.
Set the working directory to the src directory
and type
.B make.
The make file in this directory
uses the
.B g++
compiler by default,
but the install script will replace this with
.B CC
under solaris operating systems.
If your system has a different C++ compiler,
edit the
.B src/makefile
and set the
.B CC
variable to the command name.

.SH TESTING

Input text has been provided for testing, together with
the tagged text that should result.
The files
.B test/query.itame,
.B test/query.medline
and
.B test/query.xml
contain the results
of a MEDLINE query, and
.B test/query.tagged
is the result of tagging any of these.
After successful installation,
to execute the test script,
change the working directory to the
.B test
subdirectory
and execute the shell script
.B runtest,

.RS 4
.B % sh runtest
.RS -4

If any differences are encountered,
a message will be displayed,
which may indicate an error in the installation.
 
.SH INTERNALS

The
.B medpost
script invokes the program
.B util/tokenizer
to perform all tokenization and segmentation of input.
This program generates commands
that are read by the
.B util/tagger
program directing it to tag the sentences and print the results.
If specified, the output is passed to
.B util/medpost2tag.perl
to translate the MedPost tags
to Penn treebank or CLAWS2 tag sets
before printing.
These programs are executed
by the shell in a pipeline, and each program has
been written to process one line at a time as it
is read, allowing tagged output may appear before
tokenization of the input file has completed.

The lexicon is stored in
.B medpost.lex
and the ngram frequencies are stored in
.B medpost.ngrams.
In addition, a file
.B medpost.pairs
contains some abbreviations
that are used by the sentence segmenter.
The tag translations are stored in the files
.B util/medpost.penn
and
.B util/medpost.claws2.

The tokenizer and tagger are implemented as C++ classes,
and these functions can be called directly from a C++
program. See the example files
(MPtokEX1.C,
MPtokEX2.C,
MPtokEX3.C,
MPtagEX1.C,
and MPtagEX2.C)
in the src directory.


.SH FILES

.TP 20
.B INSTALL
instructions for installation
.TP 20
.B RELEASE_NOTES
release notes
.TP 20
.B makefile
make file that invokes the install script
.TP 20
.B medpost
the shell script for the MedPost tagger
.TP 20
.B doc
directory containing this man page
.TP 20
.B src
directory containing source code and make file for the MedPost tagger
and tokenizer
.TP 20
.B tagged
directory containing the corpus of tagged sentences
.TP 20
.B util
directory containing scripts

.PP
.sp
.sp
.sp
.ce 2
.B PUBLIC DOMAIN NOTICE
National Center for Biotechnology Information

.PP
This software/database is a "United States Government Work" under the
terms of the United States Copyright Act.  It was written as part of
the authors' official duties as a United States Government employee and
thus cannot be copyrighted.  This software/database is freely available
to the public for use. The National Library of Medicine and the U.S.
Government have not placed any restriction on its use or reproduction.

.PP
Although all reasonable efforts have been taken to ensure the accuracy
and reliability of the software and data, the NLM and the U.S.
Government do not and cannot warrant the performance or results that
may be obtained by using this software or data. The NLM and the U.S.
Government disclaim all warranties, express or implied, including
warranties of performance, merchantability or fitness for any particular
purpose.

.PP
Please cite the authors in any work or product based on this material.
